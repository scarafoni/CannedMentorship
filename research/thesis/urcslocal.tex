% local.tex -- released 12 February 1988
% Copyright(c) 1988 by Leslie Lamport
%   for LaTeX version 2.09
%
% This file is used to produce a Local Guide for LaTeX users containing
% information specific to a site plus errors and omissions from the LaTeX
% manual (published by Addison-Wesley).
%
% The installer of LaTeX at a site is responsible for customizing this
% document and providing copies for users.  He will have to read the
% text of this file CAREFULLY to see what must be added, removed, and
% changed.  

% The \contact command is defined to generate the name of the person to
% whom questions should be sent.  This should be someone at the site.
% Most users' questions are easily answered by anyone slightly familiar
% with LaTeX or TeX. Don't bother anyone at another site with questions
% that can be answered locally.
% COMMENTED OUT, TOO SUBJECT TO CHANGE

\documentstyle[urcsbiblio,urcsreport,11pt,twoside]{article}

%\newcommand{\contact}{?}

%\newcommand{\BibTeX}{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08em
%    T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}

%\newcommand{\SliTeX}{{\rm S\kern-.06em{\sc l\kern-.035emi}\kern-.06em T\kern
%   -.1667em\lower.7ex\hbox{E}\kern-.125emX}}

%\newcommand{\UNIX}{{\sc Unix}}

\newcommand\bs{\char '134 }  % A backslash character for \tt font

% Definitions for Knuth's upgrade commentary
\font\logo=logo10 % font used for the METAFONT logo
\font\logosl=logosl10 % font used for slanted METAFONT logo
\def\MF{{\logo META}\-{\logo FONT}}
\def\MFbook{{\sl The {\logosl METAFONT}\kern1pt book}}
\def\ldt{\mathinner{\ldotp\ldotp}}



\title{Using \LaTeX\ on the \UNIX\ Machines}

\author{Leslie Lamport\\
with local changes by Ken Yap and Lawrence Crowl}

\date{\today
\\Based on Lamport's February 1988 Document
\\For \LaTeX\ Version 2.09}

\funding{The University of Rochester Computer Science Department
supported the modification of this document for local use.
The \LaTeX\ software provides the original.}

\GUIDE{12}

\begin{document}

\pagenumbering{roman}

\maketitle

\begin{abstract}
This document is a beginners' guide to the \LaTeX\ text
formatting system in use in the department.
\end{abstract}

\tableofcontents

\newpage
\pagenumbering{arabic}

\LaTeX\ runs on a variety of computers at many different sites.  This
document tells you how to use \LaTeX\ on the Computer Science \UNIX\
machines at the University of Rochester.
It is not about \LaTeX\ itself, which is described by
the manual---{\em \LaTeX: A Document Preparation System} \cite{Lamport86},
published by Addison-Wesley, available at fine book stores everywhere.

If you have a question that you can't answer by reading the manual and
this document, ask the local maintainer of \LaTeX.
He should also be informed of any
possible \LaTeX\ bugs or undocumented anomalies.

\section{Getting Started}

\subsection{Running a Sample File} \label{sec:sample}

Before preparing your own documents, you may want to get acquainted
with \LaTeX\ by running it on a sample input file.  First make your own
copy of the file \mbox{\tt sample.tex} by typing the following
\UNIX\ command:
\begin{verbatim}
     cp /usr/lib/tex/macros/sample.tex .
\end{verbatim}
(You must type the space followed by the period at the end.  This
and all other \UNIX\ commands are ended by typing {\em return}.)
A copy of the file \mbox{\tt sample.tex} is now in your current
directory; you can edit it just like any other file.  If you destroy or
mess up your copy, typing the above command again gets you a fresh
one.

Make sure the \TeX\ programs are in your path. They reside
in directory /usr/staff/bin.

Next, run \LaTeX\ on the file \mbox{\tt sample.tex} by typing:
\begin{verbatim}
     latex sample
\end{verbatim}
When \LaTeX\ has finished, it will have produced the file \mbox{\tt
sample.dvi} in your directory.  You can print this file by typing
the commands:
\begin{verbatim}
     texpr sample.dvi
\end{verbatim}
The output will be produced on the printer Shakespeare, located on the
sixth floor, (unless you've changed the defaults).
See the manual page for \verb|texpr| for sending the
output to other printers.

After your output has been printed, you can delete \mbox{\tt
sample.dvi} by typing
\begin{verbatim}
     rm sample.dvi
\end{verbatim}

\subsection{Preparing and Running \LaTeX\ on Your Own Files}

You must use a text editor to prepare an input file for \LaTeX.
The {\em Departmental Guides} describe the \UNIX\ text editors available
here.  The easiest way to start learning about \LaTeX\ is by 
examining the file \mbox{\tt small.tex} with your text editor.
You can obtain your own copy of this file, in your directory,
by typing the command
\begin{verbatim}
     cp /usr/lib/tex/macros/small.tex .
\end{verbatim}

After you have prepared your file, whose name should have the extension
{\tt tex}, you must run it through \LaTeX\ and print the output.
Follow the instructions in Section~\ref{sec:sample}, except substitute
the first name of your file for ``\mbox{\tt sample}''.  Remember to
save disk space by deleting the {\tt dvi} file after printing the
output.
%added LAC 1990.04.06
After finishing your document, you should also delete \LaTeX's auxillary files.
These have the extensions {\tt aux}, {\tt bbl}, {\tt blg}, {\tt lof},
{\tt log}, {\tt lot}, and {\tt toc}.

%List the text editors, available, and any special features they have
%for producing \LaTeX\ input.  Explain how the various text editors
%could cause bad characters to appear in the input file that would
%generate the
%\begin{verbatim}
%! Text line contains an invalid character.
%\end{verbatim}
%error.

If you want to stop \LaTeX\ in the middle of its execution, perhaps
because it is printing a seemingly unending string of uninformative
error messages, type {\em Control-C\/} (press {\em C} while holding down
the key labeled {\em CTRL\/}).  This will make \LaTeX\ stop as if it
had encountered an ordinary error, and you can return to \UNIX\ command
level by typing {\tt X}, as described in the manual.  If typing {\em
Control-C\/} doesn't work, typing {\em Control-Z\/} will get you
immediately to \UNIX\ command level, but this will leave a stopped job
hanging around.  A stopped job won't hurt anything and will disappear
when you log out, but it forces you to type two successive \mbox{\tt
logout} commands to log out.

\sloppy
To use the {\em spell\/} program for finding spelling errors in a
\LaTeX\ input file named \mbox{\tt myfile.tex}, type the following
command:
\begin{verbatim}
     detex myfile.tex | spell
\end{verbatim}
This will type a list of possibly misspelled words on your terminal.
If you'd rather have the output written to a file named \mbox{\tt
foo.bar}, type
\begin{verbatim}
     detex myfile.tex | spell > foo.bar
\end{verbatim}

\section{Carrying On}

\subsection{\LaTeX\ on \UNIX} \label{sec:op-system}

The only special problems in using \LaTeX\ caused by the \UNIX\
operating system involve the way \UNIX\ handles files.  The first
problem arises because, when a program starts to write a file, \UNIX\
destroys the previous version of that file.  Thus, if an error forces
you to stop \LaTeX\ prematurely (by typing {\em Control-C\/} or {\em
Control-Z\/}), then the files that \LaTeX\ was writing are incomplete,
and the previous complete versions have been destroyed.  You probably
don't care about the output on the {\tt dvi} file, but, if you are
making a table of contents or using cross-referencing commands, then
\LaTeX\ also writes one or more {\em auxiliary files\/} that it reads
the next time it processes the same input file.  If the auxiliary files
are incomplete because \LaTeX\ was stopped before reaching the end of
its input file, then the table of contents and cross-references will be
incorrect the next time \LaTeX\ is run on the same input file.  You
will have to run \LaTeX\ a second time to get them right.  If you want
to avoid having to run \LaTeX\ twice after making an error---for
example, if your input is very long---then you should save copies of
these auxiliary files before running \LaTeX. An input file named
\mbox{\tt myfile.tex} and all the auxiliary files produced by \LaTeX\
from it are included in the \UNIX\ file specifier \mbox{\tt myfile.*}.
Use the \UNIX\ {\tt cp} command to save copies of these files.

The second problem in using \LaTeX\ on \UNIX\ involves the files that
\LaTeX\ reads.  The file name you type with \UNIX's {\tt latex}
command is called the {\em root file}.  In addition to reading the root
file, \LaTeX\ also reads the files specified by \hbox{\verb|\input|}
and \hbox{\verb|\include|} commands.  With the \UNIX\ directory system,
\LaTeX\ must know not only the names of these file but also on what
directories they are.  It will have no problem finding the correct
files if you follow two simple rules:
\begin{enumerate}
 \item Run \LaTeX\ from the directory containing the root file.
 \item Keep all files specified by \hbox{\verb|\input|} and 
      \hbox{\verb|\include|} commands in the same directory as the root
       file.
\end{enumerate}
If you follow these rules, you never have to type an \UNIX\ path
specifier when using \LaTeX.

You should never break the first rule, otherwise \LaTeX\ will have
trouble finding auxiliary files.  (To run \LaTeX\ on someone else's
file, copy the file to your directory.) If you break the second
rule, specifying a file from another directory in an
\hbox{\verb|\input|} or \hbox{\verb|\include|} command, you must use a
complete path name.  For example, to include the file \mbox{\tt hisfile.tex} 
from Jones' directory \hbox{\verb|/foo/bar|}, you can type
\begin{verbatim}
     \include{/u/jones/foo/bar/hisfile}
\end{verbatim}
A \verb|~| character may not appear in the argument of an
\hbox{\verb|\input|} or \hbox{\verb|\include|} command, so you {\em
can't\/} use a file name such as \hbox{\verb|~jones/foo/bar/hisfile|}.

For people who don't like to obey rules, 
here is exactly how \LaTeX\ finds its
files.  The root file is found by \UNIX\ according to its usual rules.
\LaTeX's auxiliary files are read and written in the directory from
which it is run.  All file names specified in the \LaTeX\ input,
including the names of document-style ({\tt sty}) files specified by
the \hbox{\verb|\documentstyle|} command, are interpreted relative to
the directory from which \LaTeX\ is run.  If \LaTeX\ does not find a
file starting in this directory, it looks in the system directory
\hbox{\verb|/usr/lib/tex/macros|}.  You can change the directories in
which \LaTeX\ looks for its input files by setting the environment
variable \mbox{\tt TEXINPUTS}.  Putting the command
\begin{verbatim}
     setenv TEXINPUTS .:/u/jones/myown:/usr/lib/tex/macros
\end{verbatim}
in your \mbox{\tt .login} file causes \LaTeX\ to look for files first
in the current directory, then in Jones' {\tt /myown} directory, and
then in the system directory.  You might want to do this if your name
is Jones and you have your own personal document-style files in your
{\tt /myown} directory. 

\subsection{Local Document Styles}

Several styles for departmental documents are available.
You should obtain a copy of {\em Departmental Styles for \LaTeX\/}
\cite{Crowl88} from the documentation secretary.

\subsection{Page Layout Parameters}

There are many parameters which control the layout of pages. 
The standard file {\tt layout.tex} illustrates the page layout
and lists the parameters.
You may obtain a printed copy of this file with the
following commands.
\begin{verbatim}
    cp /usr/lib/tex/macros/layout.tex .
    latex layout
    texpr layout.dvi
\end{verbatim}

\subsection{Document Styles}

This section can be skipped at first reading.

There are six document styles and style options available here that
are not described in the manual: the \mbox{\tt proc} style option for
making camera-ready copy for conference proceedings,
the {\tt doublespace} style option for double spacing,
the {\tt bezier}
option for drawing curves, the {\tt ifthen} option for implementing
{\bf if-then-else} and {\bf while-do} control structures, the \mbox{\tt
letter} style for making letters, the {\tt showidx} option for
printing index entries in the margin, and the {\tt makeidx} option for use
with the {\it MakeIndex\/} program.
See Section~\ref{sec:makeindex} for further
information on the {\em MakeIndex\/} program that uses the {\tt
makeidx} option.
The remaining style options are described
below.

\subsubsection{The {\tt proc} Style Option}

The {\tt proc} option is used with the \mbox{\tt article} document
style.  It produces two-column output for ACM and IEEE conference
proceedings.  The command \hbox{\verb|\copyrightspace|} makes the blank
space at the bottom of the first column of the first page, where the
proceedings editor will insert a copyright notice.  This command works
by producing a blank footnote, so it is placed in the text of the first
column.  It must go after any \hbox{\verb|\footnote|} command that
generates a footnote in that column.

\LaTeX\ automatically numbers the output pages.  It's a good idea 
to identify the paper on each page of output.  Placing the command
\begin{verbatim}
     \markright{Jones---Foo}
\end{verbatim}
in the preamble (before the \hbox{\verb|\begin{document}|} command)
prints ``Jones---Foo'' at the bottom of each page.  

% added LAC 1990.04.06
For final, camera-ready copy, publishers often want the manuscript
without page numbers or headings.
In this case, leave off the \verb|\markright| command
and place \verb|\pagestyle{empty}| before \verb|\begin{document}|.

\subsubsection{Double Spacing}

Conference submissions and theses may require double spaced text.
Including the {\tt doublespace} style option
turns on double spacing and defines the {\tt singlespace} environment.
Place the {\tt singlespace} environment around any
figures, tables, quotations, programs, \etc\ that will look best single spaced.

The {\tt doublespace} option stretches lines by a factor of two.
If this is too much, put the command \verb|\setstretch{1.7}|
(or some appropriate value) before the \verb|\begin{document}| command.

For example,
\begin{verbatim}
    \documentstyle[doublespace]{article}
    \setstretch{1.5}
    \begin{document}
    Most of the document will be double spaced text.
    \begin{singlespace}
    Some single spaced text.
    \end{singlespace}
    \end{document}
\end{verbatim}

Sometimes a document is to appear in both single spaced and double spaced form.
To format the document for single spacing, simply use \verb|\setstretch{1}|.

\subsubsection{The {\tt bezier} Style Option}

This option defines a single command, \hbox{\verb|\bezier|}, that draws
a curved line in a {\tt picture} environment.  Let $P_{i}$ be the point
with coordinates $(x_{i},y_{i})$, for $i=1$, 2, and 3.  The command
\begin{itemize} \tt
\item[]
\verb|\bezier{|$n$\verb|}(|$x_{1}$,$y_{1}$)($x_{2}$,$y_{2}$)($x_{3}$,$y_{3}$)
\end{itemize}
draws $n$ points on the quadratic Bezier spline determined by the three
points $P_{1}$, $P_{2}$, and $P_{3}$.  The locus of points on this
spline is a parabolic arc from $P_{1}$ to $P_{3}$ having the line
$P_{1}P_{2}$ tangent to it at $P_{1}$ and the line $P_{2}P_{3}$ tangent
to it at $P_{3}$.  Note that $P_{2}$ is {\em not\/} on this arc unless
$P_{1}$, $P_{2}$, and $P_{3}$ are colinear, in which case the arc is a
straight line.  Bezier splines are useful because it's easy to join two
of them together smoothly by giving them the same tangent line where
they meet.

It takes roughly 75 points per inch to form a solid line, depending
upon the line thickness.  See Section~C.13.3 of the manual for commands
to specify line thickness in a {\tt picture} environment.  This command
is {\em very\/} slow, and \TeX\ has enough memory to hold only about
1000 points plus a page of text.  (Remember that \TeX\ keeps the
current page plus all as yet unprinted figures in memory.) So, the
\verb|bezier| command should be used for only a small number of small
curves.

\subsubsection{The {\tt ifthen} Style Option}

This option provides two programming language features that are useful
only for people who already know how to program.  It defines the
two commands
\begin{itemize} 
\item[]
\verb|\ifthenelse{|{\em test\/}\verb|}{|{\em then clause\/}\verb|}{|%
{\em else clause\/}\verb|}|\\
\verb|\whiledo{|{\em test\/}\verb|}{|{\em do clause\/}\verb|}|
\end{itemize}
that implement the following two Pascal language structures
\begin{itemize}
\item[]
\begin{tabbing}
{\bf if} {\em test\/} \= {\bf then} \= {\em then clause\/} \\
 \> {\bf else} \> {\em else clause\/} \\[2pt]
{\bf while} {\em test\/} {\bf do} {\em do clause\/}
\end{tabbing}
\end{itemize}
The {\em then\/}, {\em else\/}, and {\em do\/} clauses
are ordinary \LaTeX\ input; {\em test\/} is one of the following:
\begin{itemize}
 \item A relation between two numbers formed with {\tt <}, {\tt >},
or {\tt =}; for example, \hbox{\verb|\value{page}>3|}.
 \item \verb|\equal{|{\em string1\/}\verb|}{|%
{\em string2\/}\verb|}|, which evaluates to {\em true\/} if {\em
string1\/} and {\em string2\/} are the same strings of characters after
all commands have been replaced by their definitions.  (Upper- and
lowercase letters are unequal.)
 \item A logical combination of the above two kinds of tests
    using the operators \hbox{\verb|\or|}, \hbox{\verb|\and|},
    and \hbox{\verb|\not|} and the parentheses \hbox{\verb|\(|}
    and \hbox{\verb|\)|}---for example:
\begin{verbatim}
    \not \( \value{section} = 1  \and  \equal{Jones}{\myname} \)
\end{verbatim}
\end{itemize}
The {\em test\/} argument is a violently moving argument, which means
that not only fragile commands but even some commands that are not
normally fragile will break, causing \TeX\ to enter an infinite loop.
The \verb|\protect| command works in these situations.

These commands, together with \hbox{\verb|\renewcommand|} and the
commands of Section~C.7.4 for manipulating counters, open up a whole
new world of hacking.


\subsubsection{Letters} \label{sec:letters}

The \mbox{\tt letter} document style, described in the manual, should
be used for generating personal letters.
Mailing labels are formatted in two columns of five
$2''\times\mbox{4-1/4}''$ labels each, suitable for copying onto Avery
brand, number 5352 address labels.

There are no features for making letters other than those described in
the manual.  However, suggestions will be accepted for such options as
the ability to print ones net address as part of the letterhead.

\subsubsection{The {\tt showidx} Style Option}

This style option, for use with the {\tt report} or {\tt book} document
styles, causes index entries to be printed in the outer margin.  It
does not change the effect of \verb|\makeindex|, which controls
whether or not an {\tt .idx} file is written.  No attempt is made to
avoid overprinting marginal notes.  This option issues a
\verb|\flushbottom| declaration.

\subsection{Where the Files Are}

% must explain where the following files are:
%   small.tex, sample.tex, *.sty, *.doc, lablst.tex, idx.tex
%

All \LaTeX\ files mentioned in the manual, including the {\tt sty} and
{\tt doc} files, are in the directory \mbox{\tt /usr/lib/tex/macros}.
The {\tt tfm} files used by \TeX\ and the {\tt pk} (raster) files
are in \mbox{\tt /usr/lib/tex/fonts}.

\subsection{Running {\tt lablst.tex} and {\tt idx.tex}}

A list of labels and citations in an input file is printed
by running \LaTeX\ on the input file \mbox{\tt lablst.tex},
which is done by typing
\begin{verbatim}
     latex /usr/lib/tex/macros/lablst
\end{verbatim}
\LaTeX\ will then ask for the name of the input file, which should be
typed without an extension, and for the name of the main document style
(e.g., \mbox{\tt article}), used by that file.

The index entries on an {\tt idx} file are printed by running \LaTeX\
on the file \mbox{\tt idx.tex}, which is done by typing
\begin{verbatim}
     latex /usr/lib/tex/macros/idx
\end{verbatim}
\LaTeX\ will ask for the name of the {\tt idx} file, which is typed
without an extension.

\subsection{Differences from the Manual}

All \LaTeX\ features described in the manual are provided by 
the implementation here.

%Explain here any characters that can appear in input files other than
%the ones listed in Section 2.1.

%Tell if the \mbox{\tt log} file has an extension other than
%\mbox{\tt .log}.  Note: on TOPS-20, its extension is \mbox{\tt .lst}.

%Describe the sizes of disks and circles the are available.

%Don't forget to mention if the invisible fonts needed for \SliTeX\
%color slides are unavailable.

\subsection{Using \BibTeX}

\BibTeX\ is a program for compiling a reference list for a document
from a bibliographic database.  It is run by typing
\begin{verbatim}
     bibtex myfile
\end{verbatim}
where \mbox{\tt myfile.tex} is the name of your \LaTeX\ input file.
This reads the file \mbox{\tt myfile.aux}, which was generated when you
ran \LaTeX\ on \mbox{\tt myfile.tex}, and produces the file \mbox{\tt
myfile.bbl}.  \BibTeX\ should be run from the directory containing
\mbox{\tt myfile.tex} (which should be the same directory from which
\LaTeX\ was run on that file).

If the {\tt bib} file is not in the same directory as the \LaTeX\ input
file---for example, if you're using someone else's {\tt bib}
file---then you must include a path as part of the file name specified
by the \hbox{\verb|\bibliography|} command.  A \verb|~| cannot appear
in the argument of a \hbox{\verb|\bibliography|} command, so you should
use a complete path name.  For example, the \LaTeX\ command
\begin{verbatim}
     \bibliography{/u/jones/bibfiles/gnus}
\end{verbatim}
specifies the file \mbox{\tt gnus.bib} kept by Jones in his 
\mbox{\tt /bibfiles} directory.

There is now no formal provision for sharing bibliographic database
information, nor are there programs to assist in making your own {\tt
bib} files.  Suggestions for forming one or more common {\tt bib} files
are welcome.

In addition to the bibliography styles described in the manual, there
is a {\tt ieeetr} style that formats entries in the style of the IEEE
transactions.

In addition to the usual three-letter abbreviations for the months, the
following abbreviations are defined by the bibliography styles:
\begin{list}{}{\labelwidth 0pt \itemindent-.5\leftmargin
       \itemsep=2pt plus 1pt
       \let\makelabel\descriptionlabel}\it
\item[\tt acmcs] ACM Computing Surveys
\item[\tt acta] Acta Informatica
\item[\tt cacm] Communications of the ACM
\item[\tt ibmjrd] IBM Journal of Research and Development
\item[\tt ibmsj] IBM Systems Journal
\item[\tt ieeese] IEEE Transactions on Software Engineering
\item[\tt ieeetc] IEEE Transactions on Computers
\item[\tt ieeetcad]
 IEEE Transactions on Computer-Aided Design of Integrated Circuits
\item[\tt ipl] Information Processing Letters
\item[\tt jacm] Journal of the ACM
\item[\tt jcss] Journal of Computer and System Sciences
\item[\tt scp] Science of Computer Programming
\item[\tt sicomp] SIAM Journal on Computing
\item[\tt tocs] ACM Transactions on Computer Systems
\item[\tt tods] ACM Transactions on Database Systems
\item[\tt tog] ACM Transactions on Graphics
\item[\tt toms] ACM Transactions on Mathematical Software
\item[\tt toois] ACM Transactions on Office Information Systems
\item[\tt toplas] ACM Transactions on Programming Languages and Systems
\item[\tt tcs] Theoretical Computer Science
\end{list}

% Note: All styles should share the same set of abbreviations.

You should obtain the latest \BibTeX\ documentation from the
documentation secretary to supplement the appendix of the
\LaTeX\ book.

\subsection{Using \SliTeX}

\SliTeX\ is a version of \LaTeX\ for making slides.
To run \SliTeX\  with a root file \mbox{\tt myroot.tex}, you type
\begin{verbatim}
     slitex myroot
\end{verbatim}
(You should be in the directory containing \mbox{\tt
myroot.tex}.) Refer to Section~\ref{sec:op-system} if you want slide
files or \hbox{\verb|\input|} files to be in a different directory from
your root file.

%Color slides are made by copying the color layers produced by \SliTeX\
%onto color transparencies using the Thermofax machine on the second
%floor.

\subsection{Using {\em MakeIndex\/}} \label{sec:makeindex}

The {\em MakeIndex\/} program helps in making an index.  It is
described in a separate document, available from the documentation secretary.


\subsection{Fonts}

Almost all the symbols available on our fonts can be generated by
ordinary \LaTeX\ commands.  However, there are type sizes not
obtainable by \LaTeX's size-changing commands with the ordinary
document styles.  Consult a local \TeX\ expert to find the
\TeX\ name for such a font.

Tables~\ref{tab:styles} and \ref{tab:fonts} allow you
to determine if the font for a type style at a particular
size is preloaded, loaded on demand, or unavailable.
\begin{table}
\centering
\begin{tabular}{l|r|r|r|}
\multicolumn{1}{l}{size} & 
\multicolumn{1}{c}{default (10pt)} &
        \multicolumn{1}{c}{11pt option}  &
        \multicolumn{1}{c}{12pt option}\\
\cline{2-4}
\verb|\tiny|       & 5pt  & 6pt & 6pt\\
\cline{2-4}
\verb|\scriptsize| & 7pt  & 8pt & 8pt\\
\cline{2-4}
\verb|\footnotesize| & 8pt & 9pt & 10pt \\
\cline{2-4}
\verb|\small|        & 9pt & 10pt & 11pt \\
\cline{2-4}
\verb|\normalsize| & 10pt & 11pt & 12pt \\
\cline{2-4}
\verb|\large|      & 12pt & 12pt & 14pt \\
\cline{2-4}
\verb|\Large|      & 14pt & 14pt & 17pt \\
\cline{2-4}
\verb|\LARGE|      & 17pt & 17pt & 20pt\\
\cline{2-4}
\verb|\huge|       & 20pt & 20pt & 25pt\\
\cline{2-4}
\verb|\Huge|       & 25pt & 25pt & 25pt\\
\cline{2-4}
\end{tabular}
\caption{Type sizes for \LaTeX\ size-changing commands.}\label{tab:styles}
\end{table}

Table~\ref{tab:styles} tells you what size of type is used for each
\LaTeX\ type-size command in the various document-style options.  For
example, with the {\tt 12pt} option, the \hbox{\verb|\large|}
declaration causes \LaTeX\ to use 14pt type.  Table~\ref{tab:fonts}
tells, for every type size, to which class of fonts each type style
belongs.  For example, in 14pt type, \verb|\bf| uses a preloaded
font and the other five type-style commands use load-on-demand fonts.
Roman (\verb|\rm|) and math italic (\verb|\mit|) fonts are all
preloaded; the \hbox{\verb|\em|} declaration uses either italic
(\verb|\it|) or roman.

\begin{table}
\centering
\begin{tabular}{l|c|c|c|c|c|c|}
\multicolumn{1}{l}{}& 
\multicolumn{1}{c}{\tt \bs it} &
\multicolumn{1}{c}{\tt \bs bf} &
\multicolumn{1}{c}{\tt \bs sl} &
\multicolumn{1}{c}{\tt \bs sf} &
\multicolumn{1}{c}{\tt \bs sc} &
\multicolumn{1}{c}{\tt \bs tt} \\
\cline{2-7}
5pt  & D & D & X & X & X & X \\
\cline{2-7}
6pt  & X & D & X & X & X & X \\
\cline{2-7}
7pt  & P & D & X & X & X & X \\
\cline{2-7}
8pt  & P & D & D & D & D & D \\
\cline{2-7}
9pt  & P & P & D & D & D & P \\
\cline{2-7}
10pt & P & P & P & P & D & P \\
\cline{2-7}
11pt & P & P & P & P & D & P \\
\cline{2-7}
12pt & P & P & P & P & D & P \\
\cline{2-7}
14pt & D & P & D & D & D & D \\
\cline{2-7}
17pt & D & P & D & D & D & D \\
\cline{2-7}
20pt & D & D & D & D & D & D \\
\cline{2-7}
25pt & X & D & X & X & X & X \\
\cline{2-7}
\end{tabular}
\caption{Font classes: P = preloaded, D = loaded on demand, 
         X = unavailable.}\label{tab:fonts}
\end{table}

%Describe any special fonts available here.

Some auxiliary fonts for math symbols and the cyrillic alphabet from
AMS are available.  There is little demand for these fonts, so any
available documentation is online, either in the macros directory or in
the \TeX\ source directories.

%Tell where to find a font manual, listing the character numbers of
%the symbols on different fonts.

%Include a table telling which fonts are preloaded, loaded on demand,
%and unavailable.  

\subsection{Related software}

Line drawings may be processed with \verb|tpic|, whose input language is
the same as that of {\tt pic} but generates \verb|\specials| to be
interpreted by the DVI to PostScript filter.  The filter required is
\verb|dvi2ps| and this is the one that \verb|texpr| invokes.

Graphical editors that generate \verb|pic| input are available.
See the manual pages for \verb|fig| and \verb|xfig|.

Encapsulated PostScript files generated by a variety of programs
(picture editors, screen dump programs, image software, etc.) can be
included by using the {\tt psfig} macros. Ask the documentation
secretary for the {\tt TPS} manual. You need only the chapter on {\tt
psfig}. Note: this facility is actually supported by the DVI to PS
backend we use, via \verb|\specials|, and is not part of the
\TeX\ language, but the {\tt psfig} interface is likely to be supported
indefinitely.

\subsection{Special Versions}

No foreign-language or other special versions of \LaTeX\ are currently
available here. However, \TeX\ version 3.0, the one in use, supports
hyphenation patterns for multiple languages, as well as 8-bit input.
No documentation or convenience styles are available yet; 3.0 was
released March 1990 so you have to look at the source or consult
TUGBOAT articles if you intend to use this facility.

\subsection{Previewers}

Several previewers for the DVI output of \TeX\ and \LaTeX\ are
available.  See the manual pages for {\tt dvitool}, {\tt xtex}, {\tt
xdvi} and {\tt dvi2tty}.  These programs will save time, laser printer
wear and trees.

\section{Summary of Available Programs}

\begin{figure}[tbhp]
\input{urcsfamily}
\caption{The \TeX\ family of tools}
\end{figure}

What follows is a selection of {\em interesting} programs and
macros currently installed.

Programs in /usr/staff/bin:

\begin{description}

\item[bibtex] bibliography processor for \LaTeX\, see \LaTeX\ book
\item[cite] pulls citations out of \LaTeX\ document
\item[cmmf] Computer Modern METAFONT
\item[detex] strip \TeX\ control sequences, usually before checking spelling
\item[dvi2ps] DVI to PostScript filter
\item[dvi2tty] DVI previewer for CRTs (very rough)
\item[dviselect] select subset of pages in DVI file
\item[dvitool] DVI previewer for Suntools
\item[fig2latex] fig to \LaTeX\ translator
\item[fig2pic] fig to pic translator
\item[fig2ps] fig to PostScript translator
\item[fig2tex] fig to PIC\TeX\ translator
\item[latex] get the \LaTeX\ book
\item[latexdvi] run latex, then dvitool
\item[makeindex] index processor for \TeX, \LaTeX\ and other languages
\item[mf] Plain METAFONT
\item[slitex] see \LaTeX\ book
\item[slitexdvi] run slitex, then dvitool
\item[tex] get the \TeX\ book
\item[texchk] check \TeX\ input for matching dollar signs, etc
\item[texdvi] run tex, then dvitool
\item[texeqn] extracts equations in \TeX\ input
\item[texexpand] expands included files in \TeX\ input
\item[texmatch] checks matching in \TeX\ documents
\item[texpr] sends DVI files to printer
\item[tgrind] like vgrind, but generates \TeX
\item[tpic] like pic, but generates \verb|\specials| for the backend

\end{description}

Programs in /usr/grads/bin:

\begin{description}

\item[f2p] fig to pic translator
\item[f2ps] fig to PostScript translator
\item[fig] graphical editor under Suntools, generates \verb|pic/tpic| output
\item[ispell] interactive spelling corrector, has a mode for \TeX
\item[xdvi] DVI previewer for the X window system, version 11R4
\item[xfig] graphical editor under X11, generates \verb|pic/tpic| output
\item[xtex] DVI previewer for the X window system, version 11R4
\item[bibtex-keys] extracts a list of keys from a bibliography database
\item[bibliography] converts a list of keys into a latex source for a bibliography
\item[bibtex-summary] produces a keyword and title summary of a bibliography database
\item[latex-outline] produces an outline of a latex document based on the chapters and sections
\item[btinvert] performs @string substitutions and then creates an inverted index for associative lookup
\item[lookup, llookup, lookat, and llookat] query the inverted index

\end{description}

Interesting files in /usr/lib/tex/macros:

\begin{description}

\item[layout.tex] generates diagram showing margin settings, etc
\item[null.tex] empty file, use when you need a dummy \TeX\ input file
\item[sample.tex] beginners look at this first
\item[small.tex] another file for beginners
\item[story.tex] the ``hello world'' of \TeX\ files
\item[urcslocal.tex] guide to local facilities
\item[urcsstyles.tex] guide to local style files

\end{description}

\section{Common Errors}

This is a local section. Here are some common errors made by users.
Profit from those who have slipped before you.  These are not bugs
because they are documented behavior.

Send in your favorite gotchas for the next version of this manual.

\subsection{Header Commands}

\begin{description}

\item[The 10pt Option ---]
There is no \verb|10pt| option on \verb|\documentstyle|. It
is the default. Yes, this is non-uniform, but $\ldots$

\item[Roman Numbering for Table of Contents ---]
There are a number of approaches to
printing the table of contents on pages with roman numerals.
First, use a style that provides this, such as {\tt urcsmanual}.
Second, use the following commands:
\begin{verbatim}
    ...
    \pagenumbering{roman}
    \maketitle
    ...
    \tableofcontents
    ...
    \chapter{First and Only First}
    \pagenumbering{arabic}
    ...
\end{verbatim}
Third, place the following commands at the end of the document:
\begin{verbatim}
    ...
    \newpage
    \pagenumbering{roman}
    \tableofcontents
    \end{document}
\end{verbatim}

\end{description}

\subsection{Sections}

\begin{description}

\item[First Paragraph Indentation ---]
The first paragraph of a section is not indented.
This is the preferred typographical style.
If you must indent, use the \verb|urcssectindent| style option.

\item[Footnotes ---]
Footnotemarks in section titles need a \verb|protect|.
For example,
\begin{verbatim}
    \section{Introduction\protect\footnotemark}
    \footnotetext{This bulk of this chapter first appeared as
    \cite{fanty85}.}
\end{verbatim}

\item[Automatic Numbering ---]
To avoid automatic section numbering,
use the \verb|\section*| command instead of the \verb|\section| command.
There are star forms for the other subdivisions too.

\item[Numbering Depth ---]
You may control the depth of section numbering with the command
\begin{verbatim}
    \setcounter{secnumdepth}{2}
\end{verbatim}

where {\tt 2} corresponds to numbering subsections
but no lower.

\end{description}

\subsection{Spacing}

\begin{description}

\item[Double Spacing ---]
To get double spacing, use the \verb|doublespace| style option.

\item[Multiple Newlines ---]
One or more spaces act as a single space.
One newline acts as a single space.
Two or more newlines acts as the \verb|\par| command to start a paragraph.

\item[Space at Top of Page ---]
The commands \verb|\vskip 3in| and \verb|\vspace{3in}|
do not generate space at the top of the page,
use the command \verb|\vspace*{3in}| instead.

\item[Blank Pages ---]
\sloppy
The commands \verb|\vfill\eject| do not generate a blank page;
\verb|~\vfill\eject| do.

\item[Multiple Parameter Commands ---]
A newline is a space, and a single space can be a parameter,
this distinction matters a great deal
when a command takes more than one long parameter.
For example, \TeX\ interprets
\begin{verbatim}
    \newenvironment{foo}
    {blah}
    {barf}
\end{verbatim}
as passing the parameters \verb|{foo}|, {\em space}, and \verb|{blah}|
to the \verb|\newenvironment| command.
The appropriate form is:
\begin{verbatim}
    \newenvironment{foo}%
    {blah}%
    {barf}
\end{verbatim}
In case you are wondering, the \verb|%| is the comment character
and swallows the newline.

\end{description}

\subsection{Figures and Tables}

\begin{description}

\item[Long Captions --- ]
The limit on the length of captions is the size of the input
buffer, typically 500 characters. This is documented and due to the way
\LaTeX\ does captions.

\item[Labels --- ]
Labels on tables and figures must follow the corresponding caption.

\item[Nested Tabbing --- ]
\sloppy
Tabbing environments don't nest.
However, you can use the \verb|\pushtabs| and \verb|\poptabs| commands.

\item[Boxed Text ---]
It is sometimes difficult to get a boxed figure of formatted text inserted.
Here is one solution:
\begin{verbatim}
    \begin{figure}
    \begin{quotation}
    \framebox{
    \parbox{4 in}{
    INSTRUCTIONS:  Circle the number corresponding to the value
    associated with your evaluation of the manager on the dimension
    defined below.
    \\
    \\
    LONG-RANGE PLANNING:  Forecasts with respect to manpower planning
    and costs; anticipates future problems and new trends; reviews
    with his people to constantly update them and uncover new
    information.
    \\
    \\
    \begin{tabular}{ccccc}
    1 & 2 & 3 & 4 & 5 \\
    Unsatisfactory & Fair & Good & Very Good & Exceptional \\
    \end{tabular}
    } % \parbox
    } % \framebox
    \caption{Example of a graphic rating scale
    with numerical and verbal anchors.
    (Source:  Berk, Ronald A., ed.  {\em Performance Assessment},
    The Johns Hopkins University Press, 1986.)}
    \end{quotation}
    \end{figure}
\end{verbatim}

\end{description}

\section{Bugs}

There are a few known bugs in \LaTeX\ that occur very seldom and
cause the user little trouble, but would be very difficult to fix.
Moreover, given the nature of complex systems, it is not unlikely that
the corrections would lead to even worse problems.  Therefore, these
bugs will probably not be fixed.

The bugs and ways to get around them are listed below.  Do not worry
about any of them until you are preparing the final draft, since
changes to the text are very likely to cause the problem to disappear.
\begin{itemize}
\item In rare instances, a figure or table will be printed on the page
preceding the text where the {\tt figure} or {\tt table} environment
appears.  This can be fixed by moving the environment further
towards the end of the document.

\item A marginal note at the top of a page may appear in the wrong
margin.  This can be fixed by inserting a redundant \verb|\pagebreak|
command to force a page break exactly where \LaTeX\ started the new
page anyway.

\item A footnote can be broken across two pages when it should fit on a
single page.  This happens when there is one or more figures or tables
on the page.  The problem is corrected by moving, towards the end of the
file, the last {\tt figure} or {\tt table} environment that produces a
figure or table on the page where the footnote starts.
\end{itemize}

\section{Errata and Additions to the Manual}

(Negative line numbers mean from the bottom of the page.)

\input{addendum}

\section{Donald E. Knuth's Commentary on Version 3.0 of \TeX\ and \MF}

For more than five years I held firm to my conviction that a stable system
was far better than a system that continues to evolve. But during the TUG
meeting at Stanford in August, 1989, I~was persuaded to make one last set of
changes, in order to bring \TeX\ and \MF\ to a state of completion consistent
with their overall philosophy and goals.

The main reason for the changes was the fact that I~had guessed wrong about
7-bit character sets versus 8-bit character sets. I~believed that standard text
input would continue indefinitely to be confined to at most 128~characters,
since I~did not think a keyboard with 256~different outputs would be
especially efficient. Needless to say, I~was proved wrong, especially by
developments in Europe and Asia. As soon as I~realized that a text formatting
program with 7-bit input would rapidly begin to seem as archaic as the 6-bit
systems we once had, I~knew that a fundamental revision was necessary.

But the 7-bit assumption pervaded everything, so I needed to take the programs
apart and redo them thoroughly in 8-bit style. This put \TeX\
onto the operating table and under the knife
for the first time since 1984, and I~had a final
opportunity to include a few new features that had occurred to me or been
suggested by users since then.

The new extensions are entirely upward compatible with previous versions
of \TeX\ and \MF\ (with a few small exceptions mentioned below).
This means that error-free inputs to the old \TeX\ and \MF\ will still
be error-free inputs to the new systems, and they will still produce the
same outputs.

However, anybody who dares to use the new extensions will be unable to get
the desired results from old versions of \TeX\ and \MF\null. I~am therefore
asking the \TeX\ community to update all copies of the old versions
as soon as possible. Let us root out and destroy the obsolete 7-bit systems,
even though we were able to do many fine things with them.

In this note I'll discuss the changes, one by one; then I'll describe
the exceptions to upward compatibility.

\subsection{The Character Set}

Up to 256 distinct characters are now allowed in input files. The codes that
were formerly limited to the range $0\ldt 127$ are now in the range
$0\ldt 255$. All characters are alike; you are free to use any character
for any purpose in \TeX, assigning appropriate values to its
{\tt{\char'134}catcode},
{\tt{\char'134}mathcode},
{\tt{\char'134}lccode},
{\tt{\char'134}uccode},
{\tt{\char'134}sfcode},
and
{\tt{\char'134}delcode}.
Plain \TeX\ initializes these code values for characters above~127 just as
it initializes the codes for ordinary punctuation characters
like~`{\tt{\char'041}}'. 

There's a new convention for inputting an arbitrary 8-bit character
to \TeX\ when you can't necessarily type~it: The four consecutive
characters 
{\tt{\char'136\char'136}}$\alpha\beta$, where $\alpha$ and~$\beta$ are
any of the ``lowercase hexadecimal digits'' 
{\tt{0}},
{\tt{1}},
{\tt{2}},
{\tt{3}},
{\tt{4}},
{\tt{5}},
{\tt{6}},
{\tt{7}},
{\tt{8}},
{\tt{9}},
{\tt{a}},
{\tt{b}},
{\tt{c}},
{\tt{d}},
{\tt{e}},
or
{\tt{f}},
are treated by \TeX\ on input as if they were a single character with
specified code digits. For example, 
{\tt{\char'136\char'136}80}
gives character code~128; the entire character set
is available from
{\tt{\char'136\char'136}00}
to
{\tt{\char'136\char'136}ff}.
The old convention discussed in Appendix~C, under which character~0 was
{\tt{\char'136\char'136\char'100}},
character~1 (control--A) was
{\tt{\char'136\char'136}A},
\dots,
and character~127 was
{\tt{\char'136\char'136}?},
still works for the first 128~character codes, except that the
character following
{\tt{\char'136\char'136}}
should not be a lowercase hexadecimal digit when the immediately following
character is another such digit.

The existence of 8-bit characters has less effect
in \MF\ than in \TeX, because \MF's character classes are built in to each
installation. The normal set of 95~printing characters described on
page~51 of 
\MFbook\
can be supplemented by extended characters as discussed on page~282, but this
is rarely done because it leads to problems of portability. \MF's 
{\bf char} operator is now redefined to operate modulo~256 instead 
of modulo~128.

\subsection{Hyphenation Tables}

Up to 256 distinct sets of rules for hyphenation are now allowed in \TeX.
There's a new integer parameter called
{\tt{\char'134}language},
whose current value specifies the hyphenation convention in force. If
{\tt{\char'134}language}
is negative or greater than~255, \TeX\ acts as if 
$\hbox{\tt{\char'134}language}=0$.

When you list hyphenation exceptions with \TeX's 
{\tt{\char'134}hyphenation}
primitive, those exceptions apply to the current language only. Similarly,
the
{\tt{\char'134}patterns}
primitive tells \TeX\ to remember new hyphenation patterns for the current
language; this operation is allowed only in the special ``initialization''
program called {\tt INITEX}\null. Hyphenation exceptions can be added at any
time, but new patterns cannot be added after a paragraph has been typeset.

When \TeX\ reads the text of a paragraph, it automatically inserts
``whatsit nodes'' into the horizontal list for that paragraph whenever
a character comes from  a different
{\tt{\char'134}language}
than its predecessor. In that way \TeX\ can tell what hyphenation
rules to use on each word of the paragraph even if you switch 
frequently back and forth among many different languages.

The special whatsit nodes are inserted automatically in unrestricted horizontal
mode (i.e.,  when you are creating a paragraph, but not when you are
specifying the contents of an hbox). You can insert a special whatsit
yourself in restricted horizontal mode by saying
{\tt{\char'134}language}$\langle$number$\rangle$.
This is needed only if you are doing something tricky, like unboxing some
contribution to a paragraph.

\subsection{Hyphenated Fragment Control}

\TeX\ has new parameters 
{\tt{\char'134}lefthyphenmin}
and
{\tt{\char'134}righthyphenmin},
which specify the smallest word fragments that will appear at the beginning
or end of a word that has been hyphenated. Previously the values
{\tt{\char'134}lefthyphenmin=2}
and
{\tt{\char'134}righthyphenmin=3}
were hard-wired into \TeX\ and impossible to change. Now plain \TeX\
format supplies the old values, which are still recommended for most
American publications; but you can get more hyphens by decreasing these
parameters, and you can get fewer hyphens by increasing them. If the sum of
{\tt{\char'134}lefthyphenmin}
and
{\tt{\char'134}righthyphenmin}
is~63 or more, all hyphenation is suppressed. (You can also suppress 
hyphenation by using a font with
{\tt{\char'134}hyphenchar=-1},
or by switching to a 
{\tt{\char'134}language}
that has no hyphenation patterns or exceptions.)

\subsection{Smarter Ligatures}

Now here's the most radical change.
Previous versions of \TeX\ had only one kind of ligature, in which two
characters like~`f' and~`i' were changed into a single character like~`fi'
when they appeared consecutively. The new \TeX\ understands much more
complex constructions by which, for example, we could change
an~`i' following~`f' to a dotless~`\i' while the~`f' remains
 unchanged:~`f\i'.

As before, you get ligatures only if they have been provided in the font
you are using. So let's look at the new features of \MF\ by which
enhanced ligatures can be created. A~\MF\ programmer can specify a
``ligature/kerning program'' for any character of the font being
created. If, for example, the~`fi' combination appears in font
position~12, the replacement of~`f' and~`\i' by~`fi' is specified by
including the statement
$$\hbox{\tt{"i"~=:~12}}$$
in the ligature/kerning program for {\tt{"f"}}; this is \MF's present
convention.

The new ligatures allow you to retain one or both of the original characters
while inserting a new one. Instead of {\tt{=:}} you can also write
{\tt{\char'174}=:} if you wish to retain the left character, or
{\tt{=:{\char'174}}} if you wish to retain the right character,
or {\tt{\char'174}=:{\char'174}} if you want to keep them both.
For example, if the dotless~\i\ appears in font position~16, you can
get the behavior mentioned above by having
$$\hbox{%
{\tt{"i" {\char'174}=: 16}}
}$$
in f's program.

There also are four additional operators
$$\hbox{%
{\tt{\char'174}=:{\char'076}},\qquad
{\tt{=:{\char'174\char'076}}},\qquad
{\tt{\char'174}=:{\char'174\char'076}},\qquad
{\tt{\char'174}=:{\char'174\char'076\char'076}},
}$$
where each {\tt\char'076} tells \TeX\ to shift its focus one position
to the right. For example, if~f and~i had been replaced by~f
and dotless~\i\ as above, \TeX\ would begin again to execute f's
ligature/kern program, possibly inserting a kern before the dotless~\i,
or possibly changing the~f to an entirely different character, etc.
But if the instruction had been
$$\hbox{%
{\tt{"i" {\char'174}=:{\char'076} 16}}
}$$
instead, \TeX\ would turn immediately to the ligature/kern program for
characters following character~16 (the dotless \i);
no further change would be made between~f and~\i\ even if the font
had something specified there.

\subsection{Boundary Ligatures}

Every consecutive string of `characters' read by \TeX\ in horizontal mode
(after macro expansion) can be called a `word'. (Technically we consider
a `character' in this definition to be either a character whose
{\tt{\char'134}catcode}
is a
letter or otherchar, or a control sequence that has been
{\tt{\char'134}let}
equal to such a character, or a control sequence that has been defined by
{\tt{\char'134}chardef},
or the construction
{\tt{\char'134}char}$\langle$number$\rangle$.)
The new \TeX\ now imagines that there is an invisible ``left boundary
character'' just before every such word, and an invisible ``right boundary
character'' just after it. These boundary characters take effect if the font
designer has specified ligatures and/or kerning between them and the
adjacent letters. Thus, the first or last character of a word can 
now be made to change its shape automatically.

A ligature/kern program for the left boundary character is specified within
\MF\ by using the special label~
{\tt{\char'174\char'174}:}
in a {\bf ligtable} command. A~ligature or kern with the right
boundary character is specified by assigning a value to the new internal
\MF\ parameter 
{\it boundarychar},
and by specifying a ligature or kern with respect to this character.
The
{\it boundarychar\/}
may or may not exist as a real character in the font.

For example, suppose we want to change the first letter of a word from~`F'
to~`ff' if we are doing some olde English. The \MF\ font designer could then
say
$$\hbox{ligtable {\tt{\char'174\char'174}: "F" {\char'174}:= 11}}$$
if character 11 is the `ff'. The same ligtable instruction should
appear in the programs for characters like~( and~` and~`` and~- that can
precede strings of letters; then `{\tt Bassington-French}' will
yield `Bassington-ffrench'.

If the `s' of our font is the pre-19th
century~s that looks like a mutilated~`f', and if we have a modern~`s'
in position~128, we can convert the final~s's as Ben Franklin did by
introducing ligature instructions such as
$$\vcenter{\halign{{\tt{#}}\hfil$\;$&{\tt{#}}\hfil\cr
boundarychar :=&255;\cr
ligtable "s":&255 =:{\char'174} 128,\cr
&"." =:{\char'174} 128,\cr
&"," =:{\char'174} 128,\cr
&")" =:{\char'174} 128,\cr
&"'" =:{\char'174} 128,\cr}}$$
and so on. (A true oldstyle font would also have 
ligatures for 
ss and si and sl and ssi and ssl
and~st; it would be fun to create a Computer Modern Oldstyle.)

The implicit left boundary character is omitted by \TeX\ if you say
{\tt{\char'134}noboundary}
just before the word; the implicit right boundary is omitted if you say
{\tt{\char'134}noboundary}
just after it.

\subsection{More Compact Ligatures}

Two or more ligtables can now share common code. To do this in \MF, you
say `{\bf skipto}~$\langle n\rangle$' at the end of one {\bf ligtable}
command, then you say `$\langle n\rangle$::' within another. Such local labels
can be reused; e.g., you can say {\bf skipto}~1 again after {\tt 1::} has
appeared, and this skips to the {\it next\/} appearance of~{\tt 1::}.  There
are 256~local labels, numbered~0 to~255. Restriction: At most 128 ligature
or kern commands can intervene between a {\bf skipto} and its matching label.

The {\tt TFM} file format has been upwardly extended to allow more than 32,500
ligature/kern commands per font. (Previously there was an effective limit
of 256.)

\subsection{Better Looking Sloppiness}

There is now a better way to avoid overfull boxes, for people who don't want
to look at their documents to fix unfeasible line breaks manually. Previously
people tried to do this by setting 
{\tt{\char'134}tolerance=10000},
but the result was terrible because \TeX\ would tend to consolidate
all the badness in one truly horrible line. (\TeX\ considers all badness
$\ge10000$ to be infinitely bad, and all these infinities are equal.)

The new feature is a dimension parameter called
{\tt{\char'134}emergencystretch}.
If
{\tt{\char'134}emergencystretch}
is positive and if \TeX\ has been unable to typeset a paragraph without
exceeding the given tolerances, another pass over the paragraph is made
in which \TeX\ pretends that additional stretchability equal to
{\tt{\char'134}emergencystretch}
is present in every line. The effect of this is to scale down all the
badnesses into a range where previously infinite cases become finite; 
\TeX\ will find an optimum solution to the scaled-down problem, and this
will be about as good as possible in a practical sense. (The extra stretching
is not really present; therefore underfull boxes will be reported in warning
messges unless
{\tt{\char'134}hbadness}
is increased.)

\subsection{Looking at Badness}

\TeX\ has a new internal integer parameter called
{\tt{\char'134}badness}
that records the badness of the box it has most recently constructed.
If that box was overfull,
{\tt{\char'134}badness}
will be 1000000; otherwise
{\tt{\char'134}badness}
will be between~0 and~10000.

\subsection{Looking at the Line Number}

\TeX\ also has a new internal integer parameter called
{\tt{\char'134}inputlineno},
which contains the number of the line that \TeX\ would show on an error message
if an error occurred now. (This parameter and
{\tt{\char'134}badness}
are ``read only'' in the same way as
{\tt{\char'134}lastpenalty}:
You can use them in the context of a $\langle$number$\rangle$, e.g., by saying
`{\tt{\char'134}ifnum{\char'134}inputlineno{\char'076\char'134}badness ...\
{\char'134}fi}'
or
`{\tt{\char'134}the{\char'134}inputlineno}',
but you cannot set them to new values.)

\subsection{Not Looking at Error Context}

There's a new integer parameter called
{\tt{\char'134}errorcontextlines}
that specifies the maximum number of two-line pairs of context displayed with
\TeX's error messages (in addition to the top and bottom lines, which always
appear). Plain \TeX\ now sets
{\tt{\char'134}errorcontextlines=5},
but higher level format packages might prefer
{\tt{\char'134}errorcontextlines=1} 
or even
{\tt{\char'134}errorcontextlines=0}.
In the latter case, an error that previously involved three or more pairs of
context would now appear as follows:

\halign{\qquad\qquad{\tt{#}}\hfil\cr
{\char'041} Error.\cr
$\langle$somewhere$\rangle$ The {\char'134}top\cr
\phantom{$\langle$somewhere$\rangle$ The {\char'134}top\ }line\cr
...\cr
1.123 {\char'134}The\cr
\phantom{1.123 {\char'134}The\ }bottom line.\cr}

\noindent
(If 
{\tt{\char'134}errorcontextlines{\char'074}0}
you wouldn't even see the `{\tt{...}}' here.)

\subsection{Output Recycling}

One more new integer parameter completes the set. If
{\tt{\char'134}holdinginserts{\char'076}0}
when \TeX\ is putting the current page into
{\tt{\char'134}box255}
for the 
{\tt{\char'134}output}
routine, \TeX\ will not move anything from insertion nodes into the
corresponding boxes; all insertion nodes will stay in place. Designers of
output routines can use this when they want to put the contents of box~255 back
into the current page to be re-broken (because they might want to change
{\tt{\char'134}vsize}
or something).

\subsection{Exceptions to Upward Compatibility}

The new features of \TeX\ and \MF\ imply that a few things work differently
than before. I~will try to list all such cases here (except when the 
previous behavior was erroneous due to a bug in \TeX\ or \MF\null).
I~don't know of any cases where users will actually be affected, because
all of these exceptions are pretty esoteric.

\medskip $\bullet$\enspace
\TeX\ used to convert the character strings
{\tt{\char'136\char'136}0},
{\tt{\char'136\char'136}1},
\dots,
{\tt{\char'136\char'136}9},
{\tt{\char'136\char'136}a},
{\tt{\char'136\char'136}b},
{\tt{\char'136\char'136}c},
{\tt{\char'136\char'136}d},
{\tt{\char'136\char'136}e},
{\tt{\char'136\char'136}f}
into the respective single characters
{\tt p},
{\tt q},
\dots,
{\tt y},
{\tt{\char'041}},
{\tt "},
{\tt{\char'043}},
{\tt{\char'044}},
{\tt{\char'045}},
{\tt{\char'046}}.
It will no longer do this if the following character is one of the characters
{\tt 0123456789abcdef}.

\medskip $\bullet$\enspace
\TeX\ used to insert no character at the end of an input line if
{\tt{\char'134}endlinechar{\char'076}127}.
It will now insert a character unless
{\tt{\char'134}endlinechar{\char'076}255}.
(As previously,
{\tt{\char'134}endlinechar{\char'074}0}
suppresses the end-of-line character. This character is normally
$13=$ ASCII control--M $=$ carriage return.)

\medskip $\bullet$\enspace
Some diagnostic messages from \TeX\ used to have the notation
{\tt ["80]} \dots {\tt ["FF]}
when referring to characters $128\ldots 255$ (for example when displaying the
contents of an overfull box involving fonts that include such characters).
The notation
{\tt{\char'136\char'136}80} $\ldots$ 
{\tt{\char'136\char'136}ff}
is now used instead.

\medskip $\bullet$\enspace
The expressions
{\tt{char128}} and {\tt{char0}} used to be equivalent in \MF; now
{\bf char} is defined modulo~256 instead. Hence {\tt{char-1}} $=$
{\tt{char255}}, etc.

\medskip $\bullet$\enspace
{\tt INITEX} used to forget all previous hyphenation patterns each time
you specified
{\tt{\char'134}patterns}.
Now all hyphenation pattern specifications are cummulative, and you are not
permitted to use
{\tt{\char'134}patterns}
after a paragraph has been hyphenated by {\tt INITEX}.

\medskip $\bullet$\enspace
\TeX\ used to act a bit differently when you tried to typeset missing
characters of a font. A~missing character is now considered to be a word
boundary, so you will get slightly more diagnostic output when
{\tt{\char'134}tracingcommands{\char'076}0}.

\medskip $\bullet$\enspace
\TeX\ and \MF\ will report different statistics at the end of a run because
they now have a different number of primitives.

\medskip $\bullet$\enspace
Programs that use the string pool feature of {\tt TANGLE} will no longer run
without changes, because the new {\tt TANGLE} starts numbering multicharacter
strings at~256 instead of~128.

\medskip $\bullet$\enspace
{\tt INITEX} programs must now set
{\tt{\char'134}lefthyphenmin=2} and
{\tt{\char'134}righthyphenmin=3}
in order to reproduce their previous behavior.

\bibliographystyle{urcsbiblio}
\bibliography{urcsstyles}

\end{document}
